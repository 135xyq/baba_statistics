(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/set/set"],{1363:function(e,n,t){"use strict";t.r(n);var a=t("a344"),u=t("b57a");for(var r in u)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return u[e]}))}(r);t("ac1b");var o=t("f0c5"),i=Object(o["a"])(u["default"],a["b"],a["c"],!1,null,"148cac85",null,!1,a["a"],void 0);n["default"]=i.exports},a344:function(e,n,t){"use strict";t.d(n,"b",(function(){return u})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){return a}));var a={uAvatar:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-avatar/u-avatar")]).then(t.bind(null,"b88f"))},"u-Input":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--input/u--input")]).then(t.bind(null,"e6ba"))},uRadioGroup:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-radio-group/u-radio-group")]).then(t.bind(null,"e98a"))},uRadio:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-radio/u-radio")]).then(t.bind(null,"9aa6"))},uButton:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-button/u-button")]).then(t.bind(null,"aad7"))}},u=function(){var e=this.$createElement;this._self._c},r=[]},ac1b:function(e,n,t){"use strict";var a=t("db39"),u=t.n(a);u.a},b57a:function(e,n,t){"use strict";t.r(n);var a=t("f43f"),u=t.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(r);n["default"]=u.a},da20:function(e,n,t){"use strict";(function(e,n){var a=t("4ea4");t("c541"),t("a9ff");a(t("66fd"));var u=a(t("1363"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(u.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},db39:function(e,n,t){},f43f:function(e,n,t){"use strict";(function(e,a){var u=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=u(t("2eee")),o=u(t("c973")),i={data:function(){return{userInfo:{avatar:"",nickName:"",gender:""},openid:"",loading:!1,isUploadImg:!1}},created:function(){var e,n;if(null!==(e=this.$store.state.userInfo)&&void 0!==e&&null!==(n=e.userInfo)&&void 0!==n&&n.openid){var t,a=null===(t=this.$store.state.userInfo)||void 0===t?void 0:t.userInfo;this.openid=a.openid,this.userInfo.avatar=a.avatarUrl,this.userInfo.nickName=a.nickName,this.userInfo.gender=a.gender}},methods:{onHandleSet:function(){var n=this;return(0,o.default)(r.default.mark((function t(){var u,i;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.userInfo.nickName.trim()){t.next=3;break}return e.showToast({title:"昵称不能为空",icon:"none"}),t.abrupt("return");case 3:if(n.loading=!0,e.showLoading(),u=n,!n.isUploadImg){t.next=10;break}return t.next=9,n.getFileId();case 9:i=t.sent;case 10:return t.next=12,a.callFunction({name:"set_user_info",data:{nickName:n.userInfo.nickName,avatarUrl:i,gender:n.userInfo.gender,openid:n.openid},success:function(){return(0,o.default)(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.showToast({title:"更新成功",icon:"success"}),n.next=3,a.callFunction({name:"get_user_info",data:{openid:u.openid},success:function(n){u.$store.dispatch("userInfo/updateUserInfo",n.result.data),e.switchTab({url:"/pages/login/login"})}});case 3:n.sent;case 4:case"end":return n.stop()}}),n)})))()}});case 12:t.sent,e.hideLoading(),n.loading=!1;case 15:case"end":return t.stop()}}),t)})))()},onHandleSetAvatar:function(){var n=this;return(0,o.default)(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.chooseImage({count:1,success:function(e){n.userInfo.avatar=e.tempFilePaths[0],n.isUploadImg=!0}});case 1:case"end":return t.stop()}}),t)})))()},getFileId:function(){var e=this;return new Promise(function(){var n=(0,o.default)(r.default.mark((function n(t){var u;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.uploadFile({filePath:e.userInfo.avatar,cloudPath:(new Date).getTime()+"-"+Math.random(0,1)});case 2:u=n.sent,t(u.fileID);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}}};n.default=i}).call(this,t("543d")["default"],t("a9ff")["default"])}},[["da20","common/runtime","common/vendor"]]]);