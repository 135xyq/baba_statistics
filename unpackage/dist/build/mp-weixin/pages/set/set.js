(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/set/set"],{"582d":function(e,n,t){"use strict";var u=t("5ea8"),a=t.n(u);a.a},"5ea8":function(e,n,t){},"9fae":function(e,n,t){"use strict";t.r(n);var u=t("d049"),a=t("b7cb");for(var r in a)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(r);t("582d");var o=t("f0c5"),i=Object(o["a"])(a["default"],u["b"],u["c"],!1,null,"148cac85",null,!1,u["a"],void 0);n["default"]=i.exports},ad6a:function(e,n,t){"use strict";(function(e,u){var a=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("2eee")),o=a(t("c973")),i={data:function(){return{userInfo:{avatar:"",nickName:"",gender:""},openid:"",loading:!1,isUploadImg:!1}},created:function(){var e,n;if(null!==(e=this.$store.state.userInfo)&&void 0!==e&&null!==(n=e.userInfo)&&void 0!==n&&n.openid){var t,u=null===(t=this.$store.state.userInfo)||void 0===t?void 0:t.userInfo;this.openid=u.openid,this.userInfo.avatar=u.avatarUrl,this.userInfo.nickName=u.nickName,this.userInfo.gender=u.gender}},methods:{onHandleSet:function(){var n=this;return(0,o.default)(r.default.mark((function t(){var a,i;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.userInfo.nickName.trim()){t.next=3;break}return e.showToast({title:"昵称不能为空",icon:"none"}),t.abrupt("return");case 3:if(n.loading=!0,e.showLoading(),a=n,!n.isUploadImg){t.next=10;break}return t.next=9,n.getFileId();case 9:i=t.sent;case 10:return t.next=12,u.callFunction({name:"set_user_info",data:{nickName:n.userInfo.nickName,avatarUrl:i,gender:n.userInfo.gender,openid:n.openid},success:function(){return(0,o.default)(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.showToast({title:"更新成功",icon:"success"}),n.next=3,u.callFunction({name:"get_user_info",data:{openid:a.openid},success:function(n){a.$store.dispatch("userInfo/updateUserInfo",n.result.data),e.switchTab({url:"/pages/login/login"})}});case 3:n.sent;case 4:case"end":return n.stop()}}),n)})))()}});case 12:t.sent,e.hideLoading(),n.loading=!1;case 15:case"end":return t.stop()}}),t)})))()},onHandleSetAvatar:function(){var n=this;return(0,o.default)(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.chooseImage({count:1,success:function(e){n.userInfo.avatar=e.tempFilePaths[0],n.isUploadImg=!0}});case 1:case"end":return t.stop()}}),t)})))()},getFileId:function(){var e=this;return new Promise(function(){var n=(0,o.default)(r.default.mark((function n(t){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,u.uploadFile({filePath:e.userInfo.avatar,cloudPath:(new Date).getTime()+"-"+Math.random(0,1)});case 2:a=n.sent,t(a.fileID);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}}};n.default=i}).call(this,t("543d")["default"],t("a9ff")["default"])},b0f6:function(e,n,t){"use strict";(function(e,n){var u=t("4ea4");t("45d3"),t("a9ff");u(t("66fd"));var a=u(t("9fae"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(a.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},b7cb:function(e,n,t){"use strict";t.r(n);var u=t("ad6a"),a=t.n(u);for(var r in u)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return u[e]}))}(r);n["default"]=a.a},d049:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){return u}));var u={uAvatar:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-avatar/u-avatar")]).then(t.bind(null,"6e1f"))},"u-Input":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--input/u--input")]).then(t.bind(null,"0787"))},uRadioGroup:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-radio-group/u-radio-group")]).then(t.bind(null,"fc7c"))},uRadio:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-radio/u-radio")]).then(t.bind(null,"612b"))},uButton:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-button/u-button")]).then(t.bind(null,"6d1b"))}},a=function(){var e=this.$createElement;this._self._c},r=[]}},[["b0f6","common/runtime","common/vendor"]]]);