(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/problem/problem"],{"1f65":function(t,e,n){"use strict";n.r(e);var a=n("5879"),o=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=o.a},"34f4":function(t,e,n){"use strict";var a=n("ba7a"),o=n.n(a);o.a},5879:function(t,e,n){"use strict";(function(t,a){var o=n("4ea4"),r=n("7037");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("9523")),u=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var n=c(e);if(n&&n.has(t))return n.get(t);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var u=o?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(a,i,u):a[i]=t[i]}a.default=t,n&&n.set(t,a);return a}(n("b010"));function c(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(c=function(t){return t?n:e})(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var d=["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],s=["#73C0DE","#FC8452","#9A60B4","#ea7ccc"],f=["#1890FF","#91CB74","#FAC858","#EE6666"],m={data:function(){return{selected:[],openId:"",pattern:{color:"#7A7E83",backgroundColor:"#fff",selectedColor:"#d81e06",buttonColor:"#d81e06",iconColor:"#fff"},dataList:[],date:(0,u.formateDate)((new Date).getTime()),monthDate:{year:(new Date).getFullYear(),month:(new Date).getMonth()+1},roundChartData:[],chartData:{},opts:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[5,5,5,5],enableScroll:!1,tooltip:{show:!1,formatter:function(t){return"".concat(t.typeName,": 10000")}},extra:{pie:{activeOpacity:.5,activeRadius:10,offsetAngle:0,labelWidth:15,border:!1,borderWidth:3,borderColor:"#FFFFFF",linearType:"custom"}}},chartData1:{},opts1:{color:d,padding:[30,15,10,15],enableScroll:!1,legend:{},xAxis:{disableGrid:!0},yAxis:{disabled:!1,disableGrid:!1,splitNumber:5,gridType:"dash",dashLength:4,gridColor:"#CCCCCC",padding:10,showTitle:!0,data:[{position:"left",min:0,title:"题目数量",titleOffsetY:-10},{position:"right",min:0,max:100,title:"正确率",textAlign:"left",titleOffsetY:-10}]},extra:{mix:{column:{type:"group",width:30,activeBgColor:"#000000",activeBgOpacity:.08,meterBorder:3,meterFillColor:"#EBFBD6"}}}}}},onShow:function(){var e,n;if(null!==(e=this.$store.state.userInfo)&&void 0!==e&&null!==(n=e.userInfo)&&void 0!==n&&n.openid){var a,o=null===(a=this.$store.state.userInfo)||void 0===a?void 0:a.userInfo;this.openId=o.openid,this.getDayList(),this.getTodayData(),this.getRoundChartsData()}else t.switchTab({url:"/pages/login/login"})},methods:{formateTime:u.default,monthSwitch:function(t){this.monthDate=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t),this.getDayList()},onAddRecord:function(){t.navigateTo({url:"/pages/addProblem/addProblem?date="+this.date})},onDelete:function(e){var n=this;t.showModal({title:"提示",content:"确定删除该记录？",success:function(o){o.confirm&&a.callFunction({name:"problem_delete",data:e,success:function(e){n.getDayList(),n.getTodayData(),n.getRoundChartsData(),t.showToast({title:"删除成功",icon:"none",duration:2e3})}})}})},onEdit:function(e){t.navigateTo({url:"/pages/addProblem/addProblem?data="+JSON.stringify(e)})},getTodayData:function(){var t=this;a.callFunction({name:"problem_get_day",data:{openid:this.openId,date:this.date},success:function(e){t.dataList=e.result.data}})},onChange:function(t){var e=this;this.date=t.fulldate,this.monthDate={year:t.year,month:t.month},a.callFunction({name:"problem_get_day",data:{openid:this.openId,date:t.fulldate},success:function(t){e.dataList=t.result.data}}),this.getRoundChartsData()},getDayList:function(){var t=this;a.callFunction({name:"problem_get_month",data:{openid:this.openId,date:this.monthDate},success:function(e){var n=e.result.data;for(var a in t.selected=[],n){var o=n[a];if(0!==o.count){var r=0;o.totalNumber>0&&(r=((o.totalNumber-o.errorNumber)/o.totalNumber*100).toFixed(2)),t.selected.push({date:a,info:r+"%"})}}}})},getRoundChartsData:function(){var t=this;a.callFunction({name:"problem_round_chart",data:{openid:this.openId,date:this.date},success:function(e){var n=e.result.data;t.roundChartData=n.map((function(t){return{name:t._id.typeName,value:t.totalNumber,labelText:t._id.typeName+":"+t.totalNumber}})),t.chartData={series:[{data:t.roundChartData}]};for(var a=n.map((function(t){return t._id.typeName})),o=n.map((function(t){return t.totalNumber})),r=n.map((function(t){return t.errorNumber})),i=[],u=0;u<o.length;u++)o[u]>0?i[u]=((o[u]-r[u])/o[u]*100).toFixed(2):i[u]=0;t.chartData1={categories:a,series:[{name:"总题数",type:"column",color:s[Math.floor(Math.random()*s.length)],data:o},{name:"错题数",type:"column",color:f[Math.floor(Math.random()*f.length)],data:r},{name:"正确率",type:"line",index:1,color:"#158c15",data:i}]}}})}}};e.default=m}).call(this,n("543d")["default"],n("a9ff")["default"])},"5bf8":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={uniCalendar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-calendar/components/uni-calendar/uni-calendar")]).then(n.bind(null,"32cb"))},uniFab:function(){return n.e("uni_modules/uni-fab/components/uni-fab/uni-fab").then(n.bind(null,"1dfd"))},uniCard:function(){return n.e("uni_modules/uni-card/components/uni-card/uni-card").then(n.bind(null,"0a92"))},uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"aad7"))},qiunDataCharts:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts")]).then(n.bind(null,"794f"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.dataList,(function(e,n){var a=t.__get_orig(e),o=t.formateTime(e.time),r=e.totalNumber>0?((e.totalNumber-e.errorNumber)/e.totalNumber*100).toFixed(2):null;return{$orig:a,m0:o,g0:r}}))),a=t.roundChartData.length,o=t.roundChartData.length;t.$mp.data=Object.assign({},{$root:{l0:n,g1:a,g2:o}})},r=[]},8259:function(t,e,n){"use strict";n.r(e);var a=n("5bf8"),o=n("1f65");for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("34f4");var i=n("f0c5"),u=Object(i["a"])(o["default"],a["b"],a["c"],!1,null,"ba9823ce",null,!1,a["a"],void 0);e["default"]=u.exports},ba7a:function(t,e,n){},e95b:function(t,e,n){"use strict";(function(t,e){var a=n("4ea4");n("c541"),n("a9ff");a(n("66fd"));var o=a(n("8259"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["e95b","common/runtime","common/vendor"]]]);